{"version":3,"sources":["js/factory/dataFactory.js"],"names":[],"mappings":"AAAA,CAAC,WAAW;IACR;;IAEA,YAAY,UAAU,CAAC,SAAS,iBAAiB,aAAa,UAAU,MAAM,kBAAkB;IAChG;SACK,OAAO;SACP,QAAQ,eAAe;;;IAG5B,SAAS,YAAY,OAAO,eAAe,WAAW,QAAQ,IAAI,gBAAgB,YAAY;;QAE1F,OAAO;YACH,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,WAAW;YACX,aAAa;YACb,YAAY;;;QAGhB,SAAS,QAAQ,UAAU;YACvB,MAAM,KAAK,cAAc,iBAAiB,cAAc,iBAAiB;iBACpE,KAAK,SAAS,MAAM;oBACjB,IAAI,KAAK,KAAK,SAAS,KAAK,SAAS,KAAK,MAAM,GAAG;wBAC/C,OAAO,MAAM;wBACb;;oBAEJ,UAAU,KAAK;oBACf,eAAe,eAAe;oBAC9B,OAAO,QAAQ,2BAA2B;mBAC3C,SAAS,MAAM;oBACd,QAAQ,IAAI;oBACZ,OAAO,MAAM,KAAK,MAAM;;;iBAG3B,MAAM,SAAS,OAAO;;;;;QAK/B,SAAS,WAAW,QAAQ;YACxB,MAAM,KAAK,cAAc,iBAAiB,cAAc,oBAAoB;iBACvE,KAAK,SAAS,MAAM;oBACjB,UAAU,KAAK;oBACf,OAAO,QAAQ,4BAA4B;oBAC3C,WAAW,OAAO;mBACnB,SAAS,MAAM;oBACd,OAAO,MAAM,KAAK,MAAM;;;iBAG3B,MAAM,SAAS,OAAO;oBACnB,QAAQ,IAAI;;;;QAIxB,SAAS,YAAY,QAAQ;YACzB,IAAI,OAAO;;;YAGX,IAAI,MAAM,GAAG;;YAEb,MAAM,KAAK,cAAc,iBAAiB,cAAc,kBAAkB;iBACrE,KAAK,SAAS,MAAM;;oBAEjB,IAAI,QAAQ;;mBAEb,SAAS,MAAM;;oBAEd,OAAO,MAAM,KAAK,MAAM;;;iBAG3B,MAAM,SAAS,OAAO;;;YAG3B,OAAO,IAAI;;;QAGf,SAAS,QAAQ,QAAQ;YACrB,MAAM,KAAK,cAAc,iBAAiB,cAAc,iBAAiB;iBACpE,KAAK,SAAS,MAAM;;;oBAGjB,OAAO,QAAQ,2BAA2B;mBAC3C,SAAS,MAAM;;oBAEd,OAAO,MAAM,KAAK,MAAM;;;iBAG3B,MAAM,SAAS,OAAO;;;;;QAK/B,SAAS,UAAU,QAAQ;YACvB,IAAI,MAAM,GAAG;YACb,MAAM,KAAK,cAAc,iBAAiB,cAAc,gBAAgB;iBACnE,KAAK,SAAS,MAAM;oBACjB,IAAI,QAAQ;mBACb,SAAS,MAAM;oBACd,QAAQ,IAAI;oBACZ,OAAO,MAAM,KAAK,MAAM;;;iBAG3B,MAAM,SAAS,OAAO;;;;YAI3B,OAAO,IAAI;;;QAGf,SAAS,UAAU,QAAQ;YACvB,IAAI,MAAM,GAAG;YACb,MAAM,KAAK,cAAc,iBAAiB,cAAc,mBAAmB;iBACtE,KAAK,SAAS,MAAM;oBACjB,IAAI,QAAQ;oBACZ,QAAQ,IAAI;oBACZ,OAAO,QAAQ;;iBAElB,MAAM,SAAS,MAAM;oBAClB,QAAQ,IAAI;;YAEpB,OAAO,IAAI;;;QAGf,SAAS,YAAY,QAAQ;YACzB,IAAI,MAAM,GAAG;YACb,MAAM,KAAK,cAAc,iBAAiB,cAAc,qBAAqB;iBACxE,KAAK,SAAS,MAAM;oBACjB,IAAI,QAAQ;oBACZ,QAAQ,IAAI;oBACZ,OAAO,QAAQ;;iBAElB,MAAM,SAAS,MAAM;oBAClB,QAAQ,IAAI;;YAEpB,OAAO,IAAI;;;;KAIlB","sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    dataFactory.$inject = [\"$http\", \"mqttConstants\", \"$location\", \"toastr\", \"$q\", \"sessionFactory\", \"$rootScope\"];\r\n    angular\r\n        .module('mqtt')\r\n        .factory('dataFactory', dataFactory)\r\n\r\n    /** @ngInject */\r\n    function dataFactory($http, mqttConstants, $location, toastr, $q, sessionFactory, $rootScope) {\r\n\r\n        return {\r\n            connect: connect,\r\n            getMessages: getMessages,\r\n            publish: publish,\r\n            getTopics: getTopics,\r\n            subscribe: subscribe,\r\n            unsubscribe: unsubscribe,\r\n            disconnect: disconnect\r\n        }\r\n\r\n        function connect(customer) {\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_CONNECT_URL, customer)\r\n                .then(function(data) {\r\n                    if (data.data.length < 1 && customer.type.id != 3) {\r\n                        toastr.error('Login failed!');\r\n                        return;\r\n                    }\r\n                    $location.path('/topics');\r\n                    sessionFactory.setSessionData(customer);\r\n                    toastr.success('Successfully logged in!', data);\r\n                }, function(data) {\r\n                    console.log(data);\r\n                    toastr.error(data.data, 'Oops some error here!');\r\n\r\n                })\r\n                .catch(function(error) {\r\n\r\n                });\r\n        }\r\n\r\n        function disconnect(params) {\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_DISCONNECT_URL, params)\r\n                .then(function(data) {\r\n                    $location.path('/');\r\n                    toastr.success('Successfully logged out!', data);\r\n                    $rootScope.auth = false;\r\n                }, function(data) {\r\n                    toastr.error(data.data, 'Oops some error here!');\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        }\r\n\r\n        function getMessages(params) {\r\n            var data = {\r\n\r\n            }\r\n            var def = $q.defer();\r\n\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_MESSAGES_URL, params)\r\n                .then(function(data) {\r\n                    // console.log(data);\r\n                    def.resolve(data);\r\n                    // toastr.success('Successfully logged in!', data);\r\n                }, function(data) {\r\n                    // console.log(data);\r\n                    toastr.error(data.data, 'Oops some error in getting messages!');\r\n\r\n                })\r\n                .catch(function(error) {\r\n\r\n                });\r\n            return def.promise;\r\n        }\r\n\r\n        function publish(params) {\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_PUBLISH_URL, params)\r\n                .then(function(data) {\r\n                    // $location.path('/topics');\r\n                    // console.log(data);\r\n                    toastr.success('Successfully published!', data);\r\n                }, function(data) {\r\n                    // console.log(data);\r\n                    toastr.error(data.data, 'Oops some error here!');\r\n\r\n                })\r\n                .catch(function(error) {\r\n\r\n                });\r\n        }\r\n\r\n        function getTopics(params) {\r\n            var def = $q.defer();\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_TOPICS_URL, params)\r\n                .then(function(data) {\r\n                    def.resolve(data);\r\n                }, function(data) {\r\n                    console.log(data);\r\n                    toastr.error(data.data, 'Oops some error here!');\r\n\r\n                })\r\n                .catch(function(error) {\r\n\r\n                });\r\n\r\n            return def.promise;\r\n        }\r\n\r\n        function subscribe(params) {\r\n            var def = $q.defer();\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_SUBSCRIBE_URL, params)\r\n                .then(function(data) {\r\n                    def.resolve(data);\r\n                    console.log(data);\r\n                    toastr.success('Successfully subscribed!')\r\n                })\r\n                .catch(function(data) {\r\n                    console.log(data);\r\n                });\r\n            return def.promise;\r\n        }\r\n\r\n        function unsubscribe(params) {\r\n            var def = $q.defer();\r\n            $http.post(mqttConstants.API_SERVER_URL + mqttConstants.API_UNSUBSCRIBE_URL, params)\r\n                .then(function(data) {\r\n                    def.resolve(data);\r\n                    console.log(data);\r\n                    toastr.success('Successfully unsubscribed!')\r\n                })\r\n                .catch(function(data) {\r\n                    console.log(data);\r\n                });\r\n            return def.promise;\r\n        }\r\n    }\r\n\r\n}());"],"file":"../../../js/factory/dataFactory.js"}