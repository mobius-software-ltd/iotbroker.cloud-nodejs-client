{"version":3,"sources":["js/factory/sessionFactory.js"],"names":[],"mappings":"AAAA,CAAC,WAAW;IACR;;IAEA,eAAe,UAAU,CAAC,UAAU,aAAa;IACjD;SACK,OAAO;SACP,QAAQ,kBAAkB;;;IAG/B,SAAS,eAAe,QAAQ,WAAW,YAAY;;QAEnD,OAAO;YACH,gBAAgB;YAChB,gBAAgB;YAChB,WAAW;YACX,UAAU;YACV,WAAW;;;QAGf,IAAI,UAAU;QACd,IAAI,SAAS;;QAEb,SAAS,iBAAiB;YACtB,IAAI,OAAO,WAAW;gBAClB,UAAU,QAAQ,SAAS,eAAe,QAAQ;YACtD,IAAI,OAAO,WAAW,eAAe,WAAW,MAAM;gBAClD,WAAW,OAAO;gBAClB,OAAO,QAAQ;gBACf,UAAU,KAAK;gBACf;;YAEJ,WAAW,OAAO;YAClB,OAAO;;;QAGX,SAAS,eAAe,MAAM;YAC1B,eAAe,QAAQ,eAAe,QAAQ,OAAO;YACrD,IAAI,OAAO,QAAQ;gBACf,eAAe,WAAW;YAC9B,UAAU;YACV,WAAW,OAAO;;;QAGtB,SAAS,UAAU,WAAW;YAC1B,SAAS;YACT,KAAK,IAAI,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;gBACvC,IAAI,IAAI;gBACR,KAAK,IAAI,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;oBACpC,IAAI,OAAO,GAAG,SAAS,UAAU,GAAG,aAAa;wBAC7C,IAAI;;gBAEZ,IAAI,KAAK;oBACL,OAAO,KAAK,UAAU,GAAG;gBAC7B,IAAI;;;;QAIZ,SAAS,SAAS,OAAO;YACrB,IAAI,QAAQ,OAAO,QAAQ;YAC3B,OAAO,OAAO,OAAO;;;QAGzB,SAAS,YAAY;YACjB,OAAO;;;;KAId","sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    sessionFactory.$inject = [\"toastr\", \"$location\", \"$rootScope\"];\r\n    angular\r\n        .module('mqtt')\r\n        .factory('sessionFactory', sessionFactory)\r\n\r\n    /** @ngInject */\r\n    function sessionFactory(toastr, $location, $rootScope) {\r\n\r\n        return {\r\n            getSessionData: getSessionData,\r\n            setSessionData: setSessionData,\r\n            pushTopic: pushTopic,\r\n            popTopic: popTopic,\r\n            getTopics: getTopics\r\n        }\r\n\r\n        var session = {};\r\n        var topics = [];\r\n\r\n        function getSessionData() {\r\n            if (typeof session == 'undefined')\r\n                session = angular.fromJson(sessionStorage.getItem('mqttSession'));\r\n            if (typeof session == 'undefined' || session == null) {\r\n                $rootScope.auth = false; \r\n                toastr.warning('First please log in!');\r\n                $location.path('/');\r\n                return;\r\n            }\r\n            $rootScope.auth = true;\r\n            return session;\r\n        }\r\n\r\n        function setSessionData(data) {\r\n            sessionStorage.setItem('mqttSession', angular.toJson(data));\r\n            if (typeof data == 'undefined')\r\n                sessionStorage.removeItem('mqttSession');\r\n            session = data;\r\n            $rootScope.auth = true;\r\n        }\r\n\r\n        function pushTopic(newTopics) {\r\n            topics = [];\r\n            for (var i = 0; i < newTopics.length; i++) {\r\n                var f = 0;\r\n                for (var j = 0; j < topics.length; j++) {\r\n                    if (topics[j].topic == newTopics[i].subscribtion.topic)\r\n                        f = 1;\r\n                }\r\n                if (f != 1)\r\n                    topics.push(newTopics[i].subscribtion);\r\n                f = 0;\r\n            }\r\n        }\r\n\r\n        function popTopic(topic) {\r\n            var index = topics.indexOf(topic);\r\n            topics.splice(index, 1)\r\n        }\r\n\r\n        function getTopics() {\r\n            return topics;\r\n        }\r\n    }\r\n\r\n}());"],"file":"../../../js/factory/sessionFactory.js"}