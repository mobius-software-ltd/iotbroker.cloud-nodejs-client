{"version":3,"sources":["assets/directives/navigation.js"],"names":[],"mappings":"AAAA,CAAC,WAAW;IACR;;IAEA,WAAW,UAAU,CAAC,aAAa,eAAe,YAAY,cAAc;IAC5E;SACK,OAAO;SACP,UAAU,cAAc;;;;IAI7B,SAAS,WAAW,WAAW,aAAa,UAAU,YAAY,gBAAgB;;QAE9E,SAAS,uBAAuB;YAC5B,IAAI,KAAK;YACT,GAAG,cAAc;YACjB,GAAG,OAAO,WAAW;YACrB;;YAEA;;YAEA,SAAS,QAAQ;gBACb,IAAI,OAAO,eAAe;gBAC1B,YAAY,gBAAgB,EAAE,QAAQ,KAAK;qBACtC,KAAK,SAAS,SAAS;wBACpB,GAAG,CAAC,SAAS;4BACT,YAAY,WAAW;;;wBAG3B,GAAG,QAAQ,SAAS,OAAO;uBAC5B,SAAS,OAAO;wBACf,YAAY,WAAW;;aAElC;YACD,WAAW,IAAI,uBAAuB,WAAW;gBAC7C,GAAG,QAAQ,UAAU;gBACrB,SAAS,QAAQ,GAAG;;;YAGxB,SAAS,OAAO;gBACZ,GAAG,QAAQ,UAAU;gBACrB,GAAG,cAAc,eAAe;;;YAGpC,WAAW;IACnB,WAAW;KACV,QAAQ,GAAG,OAAO,WAAW;;IAE9B,WAAW;oBACK,GAAG,OAAO,WAAW;;;;;;QAMjC,SAAS,OAAO;;;;QAIhB,OAAO;YACH,kBAAkB;YAClB,YAAY;YACZ,cAAc;YACd,MAAM;YACN,UAAU;YACV,OAAO;YACP,aAAa;;;;KAIpB","sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    navigation.$inject = [\"$location\", \"dataFactory\", \"$timeout\", \"$rootScope\", \"sessionFactory\"];\r\n    angular\r\n        .module('mqtt')\r\n        .directive('navigation', navigation);\r\n\r\n\r\n    /** @ngInject */\r\n    function navigation($location, dataFactory, $timeout, $rootScope, sessionFactory) {\r\n\r\n        function navigationController() {\r\n            var vm = this;\r\n            vm.sessionData = {}\r\n            vm.auth = $rootScope.auth;\r\n            init();\r\n            \r\n            check();\r\n\r\n            function check() {\r\n                var user = sessionFactory.getSessionData();\r\n                dataFactory.checkConnection({ unique: user.unique })\r\n                    .then(function(success) {\r\n                        if(!success) {\r\n                            dataFactory.disconnect(user);\r\n                          //  $location.path('/');\r\n                        }\r\n                        vm.timer = $timeout(check, 2000);\r\n                    }, function(error) {\r\n                        dataFactory.disconnect(user);\r\n                    } )\r\n            };\r\n            $rootScope.$on('$routeChangeSuccess', function() {\r\n                vm.route = $location.$$url;\r\n                $timeout.cancel( vm.timer);\r\n            })\r\n\r\n            function init() {\r\n                vm.route = $location.$$url;\r\n                vm.sessionData = sessionFactory.getSessionData();\r\n            }  \r\n            \r\n            $rootScope.$watch(\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\treturn  vm.auth = $rootScope.auth;\r\n\t\t\t\t},\r\n\t\t\t\tfunction() {\r\n                    vm.auth = $rootScope.auth;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t);\r\n        }\r\n\r\n        function link() {\r\n\r\n        }\r\n\r\n        return {\r\n            bindToController: true,\r\n            controller: navigationController,\r\n            controllerAs: 'Ctrl',\r\n            link: link,\r\n            restrict: 'AE',\r\n            scope: {},\r\n            templateUrl: 'assets/directives/navigation.html'\r\n        }\r\n    }\r\n\r\n}());"],"file":"../../../assets/directives/navigation.js"}